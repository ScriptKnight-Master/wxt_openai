var content=function(){"use strict";var R=Object.defineProperty;var A=(s,r,o)=>r in s?R(s,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[r]=o;var l=(s,r,o)=>A(s,typeof r!="symbol"?r+"":r,o);var v,w;function s(n){return n}const r={matches:["*://*.google.com/*"],main(){console.log("Hello content.")}},o=((w=(v=globalThis.browser)==null?void 0:v.runtime)==null?void 0:w.id)==null?globalThis.chrome:globalThis.browser;function u(n,...t){}const I={debug:(...n)=>u(console.debug,...n),log:(...n)=>u(console.log,...n),warn:(...n)=>u(console.warn,...n),error:(...n)=>u(console.error,...n)},b={BASE_URL:"/",BROWSER:"chrome",CHROME:!0,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"content",FIREFOX:!1,MANIFEST_VERSION:3,MODE:"production",OPERA:!1,PROD:!0,SAFARI:!1,SSR:!1,VITE_CJS_IGNORE_WARNING:"true"},E=class E extends Event{constructor(t,e){super(E.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=e}};l(E,"EVENT_NAME",m("wxt:locationchange"));let f=E;function m(n){var e;const t=typeof b>"u"?"build":"content";return`${(e=o==null?void 0:o.runtime)==null?void 0:e.id}:${t}:${n}`}function T(n){let t,e;return{run(){t==null&&(e=new URL(location.href),t=n.setInterval(()=>{let i=new URL(location.href);i.href!==e.href&&(window.dispatchEvent(new f(i,e)),e=i)},1e3))}}}const c=class c{constructor(t,e){l(this,"isTopFrame",window.self===window.top);l(this,"abortController");l(this,"locationWatcher",T(this));this.contentScriptName=t,this.options=e,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return o.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,e){const i=setInterval(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(t,e){const i=setTimeout(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(t){const e=requestAnimationFrame((...i)=>{this.isValid&&t(...i)});return this.onInvalidated(()=>cancelAnimationFrame(e)),e}requestIdleCallback(t,e){const i=requestIdleCallback((...a)=>{this.signal.aborted||t(...a)},e);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(t,e,i,a){var d;e==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(d=t.addEventListener)==null||d.call(t,e.startsWith("wxt:")?m(e):e,i,{...a,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),I.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:c.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")}listenForNewerScripts(t){let e=!0;const i=a=>{var d,S;if(((d=a.data)==null?void 0:d.type)===c.SCRIPT_STARTED_MESSAGE_TYPE&&((S=a.data)==null?void 0:S.contentScriptName)===this.contentScriptName){const N=e;if(e=!1,N&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}};l(c,"SCRIPT_STARTED_MESSAGE_TYPE",m("wxt:content-script-started"));let g=c;function _(){}function h(n,...t){}const p={debug:(...n)=>h(console.debug,...n),log:(...n)=>h(console.log,...n),warn:(...n)=>h(console.warn,...n),error:(...n)=>h(console.error,...n)};return(async()=>{try{const{main:n,...t}=r,e=new g("content",t);return await n(e)}catch(n){throw p.error('The content script "content" crashed on startup!',n),n}})()}();
content;
